syntax = "proto3";

import "google/protobuf/empty.proto";

package user;

service UserService {
  rpc CreateUser (CreateUserRequest) returns (google.protobuf.Empty);
  rpc FindUserById(FindUserByIdRequest) returns (FindUserByIdResponse);
  rpc FindUserByEmail(FindUserByEmailRequest) returns (FindUserByEmailResponse);
  rpc DeleteUserById(DeleteUserByIdRequest) returns (google.protobuf.Empty);
  rpc UpdateUserEmail(UpdateUserEmailRequest) returns (google.protobuf.Empty);
  rpc UpdateUserPassword(UpdateUserPasswordRequest) returns (google.protobuf.Empty);
}

message CreateUserRequest {
  string email = 1; // Example: "pepe@pepe.com"
  string password = 2; // Example: "pepe123"
  string type = 3; // Example: "STANDARD"
  repeated string notification_types = 4; // Example:  ["EMAIL", "SMS"]
}

message CreateUserCommand {
  string email = 1;
  string password = 2;
  string type = 3;
  repeated string notification_types = 4;
}

message UserCreatedEvent {
  string id = 1;
  string aggregateId = 2;
  string email = 3;
  string password = 4;
  string type = 5;
  repeated string notification_types = 6;
  string occurredOn = 7;
}

message FindUserByIdRequest {
  string id = 1;
}

message FindUserByIdResponse {
  string id = 1;
  string email = 2;
}

message FindUserByEmailRequest {
  string email = 1;
}

message FindUserByEmailResponse {
  string id = 1;
  string email = 2;
}

message DeleteUserByIdRequest {
  string id = 1;
}

message UpdateUserEmailRequest {
  string id = 1;
  string email = 2;
}

message UpdateUserPasswordRequest {
  string id = 1;
  string password = 2;
}
